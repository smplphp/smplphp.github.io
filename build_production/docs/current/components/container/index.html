<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="description" content="The SMPL dependency injection container component">

    <meta property="og:site_name" content="SMPL - Simple, modern PHP framework and libraries"/>
    <meta property="og:title" content="Dependency Injection Container component | SMPL - Simple, modern PHP framework and libraries"/>
    <meta property="og:description" content="The SMPL dependency injection container component"/>
    <meta property="og:url" content="https://my-jigsaw-docs.com/docs/current/components/container"/>
    <meta property="og:image" content="/assets/img/smpl_logo_green.png"/>
    <meta property="og:type" content="website"/>

    <meta name="twitter:image:alt" content="SMPL - Simple, modern PHP framework and libraries">
    <meta name="twitter:card" content="summary_large_image">

    
    <title>SMPL - Simple, modern PHP framework and libraries | Dependency Injection Container component</title>

    <link rel="home" href="https://my-jigsaw-docs.com">
    <link rel="icon" href="/favicon.ico">

    
        <!-- Insert analytics code here -->
    
    <link rel="stylesheet" href="/assets/build/css/main.css?id=113d530783a439116126">

    </head>

<body>

    
    <header class="header">
    <img src="/assets/img/smpl_logo_green.png" class="header__logo">
    <div class="header__social">
        <a href="https://twitter.com/smplphp" class="header__social-link" target="_blank">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24"><path fill="none" d="M0 0h24v24H0z"/><path d="M22.162 5.656a8.384 8.384 0 0 1-2.402.658A4.196 4.196 0 0 0 21.6 4c-.82.488-1.719.83-2.656 1.015a4.182 4.182 0 0 0-7.126 3.814 11.874 11.874 0 0 1-8.62-4.37 4.168 4.168 0 0 0-.566 2.103c0 1.45.738 2.731 1.86 3.481a4.168 4.168 0 0 1-1.894-.523v.052a4.185 4.185 0 0 0 3.355 4.101 4.21 4.21 0 0 1-1.89.072A4.185 4.185 0 0 0 7.97 16.65a8.394 8.394 0 0 1-6.191 1.732 11.83 11.83 0 0 0 6.41 1.88c7.693 0 11.9-6.373 11.9-11.9 0-.18-.005-.362-.013-.54a8.496 8.496 0 0 0 2.087-2.165z" fill="#000"/></svg>
        </a>
        <a href="https://github.com/smplphp" class="header__social-link" target="_blank">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24"><path fill="none" d="M0 0h24v24H0z"/><path d="M12 2C6.475 2 2 6.475 2 12a9.994 9.994 0 0 0 6.838 9.488c.5.087.687-.213.687-.476 0-.237-.013-1.024-.013-1.862-2.512.463-3.162-.612-3.362-1.175-.113-.288-.6-1.175-1.025-1.413-.35-.187-.85-.65-.013-.662.788-.013 1.35.725 1.538 1.025.9 1.512 2.338 1.087 2.912.825.088-.65.35-1.087.638-1.337-2.225-.25-4.55-1.113-4.55-4.938 0-1.088.387-1.987 1.025-2.688-.1-.25-.45-1.275.1-2.65 0 0 .837-.262 2.75 1.026a9.28 9.28 0 0 1 2.5-.338c.85 0 1.7.112 2.5.337 1.912-1.3 2.75-1.024 2.75-1.024.55 1.375.2 2.4.1 2.65.637.7 1.025 1.587 1.025 2.687 0 3.838-2.337 4.688-4.562 4.938.362.312.675.912.675 1.85 0 1.337-.013 2.412-.013 2.75 0 .262.188.574.688.474A10.016 10.016 0 0 0 22 12c0-5.525-4.475-10-10-10z" fill="#000"/></svg>
        </a>
    </div>
    <div class="header__navigation">
        <nav class="nav">
            <a href="/" class="nav__item ">Home</a>
            <a href="/docs/current/getting-started" class="nav__item nav__item--active">Documentation</a>
            <a href="https://github.com/smplphp" class="nav__item" target="_blank">Github</a>
            
        </nav>
    </div>
</header>
    <main class="docs">

        <aside class="docs__sidebar">
            <input type="search" class="docs__sidebar-search" placeholder="Search documentation">
            <nav class="nav--docs">

                    <div class="nav__group">
        <a href="/docs/current/getting-started"
           class="nav__title "
           path="docs/current/components/container" prefix="/docs/current/getting-started">Getting Started</a>
        <div class="nav__items">
                                                <a href="/docs/current/getting-started"
                       class="nav__item ">Installation</a>
                                    </div>
    </div>
    <div class="nav__group">
        <a href="/docs/current/components"
           class="nav__title nav__title--active"
           path="docs/current/components/container" prefix="/docs/current/components">Components</a>
        <div class="nav__items">
                                                <a href="/docs/current/components/container"
                       class="nav__item nav__item--active">Container</a>
                                    </div>
    </div>

            </nav>
        </aside>

        <section class="docs__content DocSearch-content" v-pre>

            <h1 id="container">Container</h1>

<p>The SMPL container component provides dependency injection using modern PHP 8 attributes, allowing you to decouple
your classes and simplify the instantiation of objects.</p>

<ul>
<li><a href="#requirements">Requirements</a></li>
<li><a href="#installation">Installation</a></li>
<li><a href="#usage">Usage</a>

<ul>
<li><a href="#resolving-dependencies">Resolving dependencies</a></li>
<li><a href="#binding-to-the-container">Binding to the container</a>

<ul>
<li><a href="#class-bindings">Class bindings</a></li>
<li><a href="#object-bindings">Object bindings</a></li>
<li><a href="#method-bindings">Method bindings</a></li>
<li><a href="#closure-bindings">Closure bindings</a></li>
<li><a href="#function-bindings">Function bindings</a></li>
</ul></li>
</ul></li>
</ul>

<h2 id="requirements">Requirements</h2>

<p>To run the container component you must be using at least PHP 8.0.</p>

<h2 id="installation">Installation</h2>

<p>You can install the container using composer.</p>

<pre><code class="language-bash">composer require smplphp/container
</code></pre>

<h2 id="usage">Usage</h2>

<p>Using this component all starts with an instance of the container. The easiest way to get hold of one, is to use the
<code>getInstance()</code> method on the <code>Smpl\Container\Container</code> class.</p>

<pre><code class="language-php">$container = \Smpl\Container\Container::getInstance();
</code></pre>

<h3 id="resolving-dependencies">Resolving dependencies</h3>

<p>Once you have an instance of the container you're ready to start resolving dependencies.</p>

<p>To show you how the container works, let's take a look at these two example classes.</p>

<p><code>AnotherClass</code> is a dependency that we need to resolve.</p>

<pre><code class="language-php">class AnotherClass 
{
    public function getNumber(): int
    {
        return 1;
    }
}
</code></pre>

<p>And <code>MyClass</code> is the class that we want a new instance of.</p>

<pre><code class="language-php">class MyClass 
{
    private AnotherClass $anotherClass;

    public function __construct(AnotherClass $anotherClass)
    {
        $this-&gt;anotherClass = $anotherClass;
    }
}
</code></pre>

<p>Because the <code>AnotherClass</code> has no external dependencies, the container is able to automatically create a new instance
of it without being told how. To get a new instance of <code>MyClass</code> we can just ask the container to resolve it.</p>

<pre><code class="language-php">$myObject = $container-&gt;resolve(MyClass::class);
</code></pre>

<h3 id="binding-to-the-container">Binding to the container</h3>

<p>Now, let's say that <code>AnotherClass</code> actually relies on a <code>NumberGenerator</code>, which is an interface.</p>

<pre><code class="language-php">class AnotherClass 
{
    private NumberGenerator $generator;

    public function __construct(NumberGenerator $generator)
    {
        $this-&gt;generator = $generator;
    }

    public function getNumber(): int
    {
        return $this-&gt;generator-&gt;generateNumber();
    }
}
</code></pre>

<p>Since interfaces cannot be instantiated the container isn't able to create a new instance of <code>NumberGenerator</code>.</p>

<p>Let's say that amongst our implementations of <code>NumberGenerator</code> we have <code>RandomNumberGenerator</code>, which we want to be
the default implementation.</p>

<pre><code class="language-php">class RandomNumberGenerator implements NumberGenerator
{
    public function generateNumber(): int
    {
        return rand();
    }
}
</code></pre>

<p>To make this so, we need to bind the <code>RandomNumberGenerator</code> to <code>NumberGenerator</code> within the container.</p>

<p>There are five ways that something can be bound to the container.</p>

<h4 id="class-bindings">Class bindings</h4>

<p>Luckily our <code>RandomNumberGenerator</code> has no dependencies, so the container is able to create a new instance on its own. 
To bind it to the container we can just use the class name.</p>

<pre><code class="language-php">$container-&gt;bind(NumberGenerator::class, RandomNumberGenerator::class);
</code></pre>

<p>Now when the container requires an instance of <code>NumberGenerator</code>, it will create a new instance of <code>RandomNumberGenerator</code>.</p>

<h4 id="object-bindings">Object bindings</h4>

<p>Sometimes you will want to bind an object to the container. The benefit of this is that the container will always
return the same object when requested, and won't create a new instance each time.</p>

<p>To bind the <code>RandomNumberGenerator</code> to the container as an object can do the following.</p>

<pre><code class="language-php">$container-&gt;bind(NumberGenerator::class, new RandomNumberGenerator);
</code></pre>

<h4 id="method-bindings">Method bindings</h4>

<p>Let's say that we have a number of different <code>NumberGenerator</code> implementations, and a <code>NumberGeneratorFactory</code> that
knows how to create each one. Instead of creating the instance ourself, we can tell the container to call a method on 
the factory to retrieve a new instance.</p>

<p>To do that we do the following.</p>

<pre><code class="language-php">$container-&gt;bind(NumberGenerator::class, [NumberGeneratorFactory::class, 'random']);
</code></pre>

<p>Now when an instance of <code>NumberGenerator</code> is required, the container will call the <code>random</code> method on <code>NumberGeneratorFactory</code>.
This approach works for both static and non-static methods.</p>

<h4 id="closure-bindings">Closure bindings</h4>

<p>Sometimes you want to be specific and tell the container exactly how to create a new instance. In this situation you
can use a closure/anonymous function.</p>

<p>To do bind a closure to the container you can do the following.</p>

<pre><code class="language-php">$container-&gt;bind(NumberGenerator::class, fn() =&gt; new RandomNumberGenerator);
</code></pre>

<p>Now when an instance of <code>NumberGenerator</code> is required, the closure will be ran and the result used as the dependency.</p>

<h4 id="function-bindings">Function bindings</h4>

<p>Let's say that you have a collection of helper functions that create new instances of your number generators, and the
<code>createRandomNumberGenerator()</code> function creates a new instance of the <code>RandomNumberGenerator</code> class.</p>

<p>To bind this to the container you can do the following.</p>

<pre><code class="language-php">$container-&gt;bind(NumberGenerator::class, 'createRandomNumberGenerator');
</code></pre>

        </section>

    </main>

    <script src="/assets/build/js/main.js?id=23eb5013554e0b705d3e"></script>

    
</body>
</html>
